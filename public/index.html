<!--
A simple drawing application for touch devices.
Loïc Fontaine - http://github.com/lfont - MIT Licensed
-->

<html>
    <head>
        <title>WebPaint</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
        <meta charset='utf-8'>
        <link rel="localizations" href="l10n/index/localizations.json" type="application/vnd.oftn.l10n+json" />
        <link rel="stylesheet" href="lib/jquery.mobile-1.0/jquery.mobile-1.0.css" />
        <link rel="stylesheet" href="themes/index/index.css" />
        <script src="lib/jquery-1.6.4.js"></script>
        <script src="lib/jquery.mobile.mvc-0.6.1.js"></script>
        <script src="lib/l10n.js"></script>
        <script src="lib/drawing-0.5.0.js"></script>
        <script src="lib/drawing.event-0.5.0.js"></script>
        <script src="scripts/index.js"></script>
        <script src="lib/jquery.mobile-1.0/jquery.mobile-1.0.js"></script>
        <script src="lib/jquery.mobile.download.js"></script>
        <script src="lib/jquery.mobile.toast.js"></script>
    </head>
    <body>
        <script type="text/template" data-mvc-view="{ name: colorPicker }">
            <div>
                <div class="colorpicker-custom-colors">
                    <p><%= customColorHint %></p>
                    <div class="colorpicker-custom-color"
                        data-mvc-binding="{ type: object, property: customColor }"
                        data-mvc-command="{ event: vclick, method: value, param-color: custom }">
                    </div>
                    <div data-role="fieldcontain">
                        <label for="red"><%= redLabel %></label>
                        <input type="number" name="red"
                            data-type="range" data-theme="c" data-track-theme="b"
                            value="0" min="0" max="255"
                            data-mvc-binding="{ type: object, property: red }" />
                    </div>
                    <div data-role="fieldcontain">
                        <label for="green"><%= greenLabel %></label>
                        <input type="number" name="green"
                            data-type="range" data-theme="c" data-track-theme="b"
                            value="0" min="0" max="255"
                            data-mvc-binding="{ type: object, property: green }" />
                    </div>
                    <div data-role="fieldcontain">
                        <label for="blue"><%= blueLabel %></label>
                        <input type="number" name="blue"
                            data-type="range" data-theme="c" data-track-theme="b"
                            value="0" min="0" max="255"
                            data-mvc-binding="{ type: object, property: blue }" />
                    </div>
                </div>
                <div>
                    <p><%= predefinedColorHint %></p>
                    <div data-mvc-view-anchor="cpPredefinedColors">
                    </div>
                </div>
            </div>
        </script>
        <script type="text/template" data-mvc-view="{ name: cpPredefinedColors }">
            <table class="colorpicker-predefined-colors">
                <tr>
                <% for (var i = 0; i < colors.length; i += 1) { %>
                    <% var color = colors[i]; %>
                    <% if (i !== 0 && i % 4 === 0) { %>
                        </tr>
                        <tr>
                    <% } %>
                    <td>
                        <div class="colorpicker-predefined-color"
                            title="<%= color.name %>"
                            data-mvc-command="{ event: vclick, method: value, param-color: <%= color.code %> }">
                            <div class="<%= (color.code === selectedColor) ? 'colorpicker-color-selected' : '' %>"
                                style="background-color: <%= color.code %>"></div>
                        </div>
                    </td>
                <% } %>
                </tr>
            </table>
        </script>
        
        <div data-role="page" id="main"></div><!-- /page -->
        <script type="text/template" data-mvc-view="{ page: main, name: pagebeforecreate }">
            <div data-role="header" data-position="fixed"
                data-mvc-binding="{ type: object, property: header }">
                <h1 class="ui-title-left"><%= title %></h1>
                <div class="ui-btn-right">
                    <a href="#" data-role="button" data-icon="back"
                        data-iconpos="notext" data-theme="b"
                        data-mvc-command="{ event: vclick, method: undo }">
                        <%= undoButton %>
                    </a>
                    <a href="#" data-role="button" data-icon="forward"
                        data-iconpos="notext" data-theme="b"
                        data-mvc-command="{ event: vclick, method: redo }">
                        <%= redoButton %>
                    </a>
                    <a href="#tools" data-role="button" data-icon="star"
                        data-iconpos="notext" data-theme="b" data-rel="dialog">
                        <%= toolsButton %>
                    </a>
                    <a href="#options" data-role="button" data-icon="gear"
                        data-iconpos="notext" data-theme="b" data-rel="dialog">
                        <%= optionsButton %>
                    </a>
                </div>
            </div><!-- /header -->

            <div data-role="content"
                data-mvc-binding="{ type: object, property: content }">
                <canvas data-mvc-binding="{ type: object, property: canvas }" />
            </div><!-- /content -->
        </script>

        <div data-role="page" id="tools"></div><!-- /page -->
        <script type="text/template" data-mvc-view="{ page: tools, name: pagebeforecreate }">
            <div data-role="header">
                <h1><%= title %></h1>
            </div><!-- /header -->

            <div data-role="content" data-theme="b">
                <div class="block">
                    <label><%= shapeLabel %></label>
                    
                    <fieldset data-role="fieldcontain">
                        <div data-role="controlgroup"
                            data-type="horizontal"
                            data-mvc-binding="{ type: object, property: shape }">
                            <input type="radio" name="shape" id="pencil" value="pencil" />
                            <label for="pencil" data-theme="d"><%= pencilLabel %></label>
                            
                            <input type="radio" name="shape" id="line" value="line" />
                            <label for="line" data-theme="d"><%= lineLabel %></label>
                            
                            <input type="radio" name="shape" id="rectangle" value="rectangle" />
                            <label for="rectangle" data-theme="d"><%= rectangleLabel %></label>
                            
                            <input type="radio" name="shape" id="circle" value="circle" />
                            <label for="circle" data-theme="d"><%= circleLabel %></label>
                         </div>
                    </fieldset>
                </div>
                <div class="block">
                    <label for="width"><%= widthLabel %></label>
                    
                    <div data-role="fieldcontain">
                        <input type="number" name="width" id="width"
                            data-type="range" data-theme="c" data-track-theme="b"
                            value="1" min="1" max="100"
                            data-mvc-binding="{ type: object, property: width }" />
                    </div>
                </div>
                <div class="block">
                    <label><%= colorLabel %></label>
                    
                    <div data-mvc-view-anchor="colorPicker:cPicker"></div>
                </div>
            </div><!-- /content -->

            <div data-role="footer">
                <h4></h4>
            </div><!-- /footer -->
        </script>
        
        <div data-role="page" id="options"></div><!-- /page -->
        <script type="text/template" data-mvc-view="{ page: options, name: pagebeforecreate }">
            <div data-role="header">
                <h1><%= title %></h1>
            </div><!-- /header -->

            <div data-role="content" data-theme="d">
                <ul data-role="listview">
                    <% for (var i = 0; i < options.length; i += 1) { %>
                        <% var option = options[i]; %>
                        <li>
                            <a href="<%= option.link %>" data-rel="dialog"
                                <% if (option.method) { %>
                                    data-mvc-command="{ event: vclick, method: <%= option.method.name %>, param-name: <%= option.method.param %> }"
                                <% } %>
                                >
                                <%= option.name %>
                            </a>
                        </li>
                    <% } %>
                </ul>
            </div><!-- /content -->

            <div data-role="footer">
                <h4></h4>
            </div><!-- /footer -->
        </script>

        <div data-role="page" id="newDrawing"></div><!-- /page -->
        <script type="text/template" data-mvc-view="{ page: newDrawing, name: pagebeforecreate }">
            <div data-role="header">
                <h1><%= title %></h1>
            </div><!-- /header -->

            <div data-role="content" data-theme="b">
                <div class="block">
                    <label><%= background %></label>
                    
                    <div data-mvc-view-anchor="colorPicker:cPicker"></div>
                </div>
            </div><!-- /content -->

            <div data-role="footer">
                <h4></h4>
            </div><!-- /footer -->
        </script>

        <div data-role="page" id="history"></div><!-- /page -->
        <script type="text/template" data-mvc-view="{ page: history, name: pagebeforecreate }">
            <div data-role="header">
                <h1><%= title %></h1>
            </div><!-- /header -->

            <div data-role="content" data-theme="d"
                data-mvc-view-anchor="pagebeforeshow">
            </div><!-- /content -->

            <div data-role="footer">
                <h4></h4>
            </div><!-- /footer -->
        </script>
        <script type="text/template" data-mvc-view="{ page: history, name: pagebeforeshow }">
            <ul data-role="listview">
                <% for (var i = histories.length - 1; i >= 0; i -= 1) { %>
                    <% var imageDataURL = histories[i]; %>
                    <li>
                        <a href="#" data-mvc-command="{ event: vclick, method: setHistory, param-index: <%= i %> }">
                            <img src="<%= imageDataURL %>" alt="<%= i %>"
                                class="webpaint-history-image" />
                            <%= historyLabel + i %>
                            <% if (i === history) { %>
                                <span class="ui-li-count">*</span>
                            <% } %>
                        </a>
                    </li>
                <% } %>
            </ul>
        </script>

        <div data-role="page" id="language"></div><!-- /page -->
        <script type="text/template" data-mvc-view="{ page: language, name: pagebeforecreate }">
            <div data-role="header">
                <h1><%= title %></h1>
            </div><!-- /header -->

            <div data-role="content" data-theme="b">
                <p><%= information %></p>
                <div data-mvc-view-anchor="pagebeforeshow"></div>
            </div><!-- /content -->

            <div data-role="footer">
                <h4></h4>
            </div><!-- /footer -->
        </script>
        <script type="text/template" data-mvc-view="{ page: language, name: pagebeforeshow }">
            <ul data-role="listview" data-theme="d">
                <% for (var i = 0; i < languages.length; i += 1) { %>
                    <% var language = languages[i]; %>
                    <li>
                        <a href="#" data-mvc-command="{ event: vclick, method: setLocale, param-locale: <%= language.code %> }">
                            <img src="themes/index/images/<%= language.code %>.png"
                                alt="<%= language.name %>" class="ui-li-icon" />
                            <%= language.name %>
                            <% if (language.code === locale) { %>
                                <span class="ui-li-count">*</span>
                            <% } %>
                        </a>
                    </li>
                <% } %>
            </ul>
        </script>

        <div data-role="page" id="about"></div><!-- /page -->
        <script type="text/template" data-mvc-view="{ page: about, name: pagebeforecreate }">
            <div data-role="header">
                <h1><%= title %></h1>
            </div><!-- /header -->

            <div data-role="content" data-theme="b">
                <h2><%= version %></h2>
                <p>
                    <%= description %>
                </p>
                <p>
                    <%= follow %>&nbsp;
                    <a href="http://twitter.com/loic_fontaine" target="_blank">Twitter</a>
                </p>
                <p>
                    <%= source %>&nbsp;
                    <a href="http://github.com/lfont/WebPaint" target="_blank">github</a>
                    <br />
                    &copy; 2011-2012 Loïc Fontaine
                </p>
            </div><!-- /content -->

            <div data-role="footer">
                <h4></h4>
            </div><!-- /footer -->
        </script>
    </body>
</html>
